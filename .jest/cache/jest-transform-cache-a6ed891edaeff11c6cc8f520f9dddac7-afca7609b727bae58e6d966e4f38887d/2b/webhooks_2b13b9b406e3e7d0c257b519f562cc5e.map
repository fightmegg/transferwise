{"version":3,"sources":["webhooks.js"],"names":["livePublicKey","sandboxPublicKey","constructEvent","sandbox","payload","signature","sig","crypto","createVerify","update","verified","verify","JSON","parse"],"mappings":";;;;;;;AAAA;;;;AAEA,MAAMA,aAAa,GAAI;;;;;;;;;yBAAvB;AAWA,MAAMC,gBAAgB,GAAI;;;;;;;;;yBAA1B;;AAWO,MAAMC,cAAc,GAAG,CAACC,OAAO,GAAG,KAAX,EAAkBC,OAAlB,EAA2BC,SAA3B,KAAyC;AACrE,QAAMC,GAAG,GAAGC,gBAAOC,YAAP,CAAoB,UAApB,CAAZ;;AACAF,EAAAA,GAAG,CAACG,MAAJ,CAAWL,OAAX;AACA,QAAMM,QAAQ,GAAGJ,GAAG,CAACK,MAAJ,CACfR,OAAO,GAAGF,gBAAH,GAAsBD,aADd,EAEfK,SAFe,EAGf,QAHe,CAAjB;AAKA,MAAIK,QAAJ,EAAc,OAAOE,IAAI,CAACC,KAAL,CAAWT,OAAX,CAAP;AACd,SAAO,IAAP;AACD,CAVM","sourcesContent":["import crypto from \"crypto\";\n\nconst livePublicKey = `\n-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAvO8vXV+JksBzZAY6GhSO\nXdoTCfhXaaiZ+qAbtaDBiu2AGkGVpmEygFmWP4Li9m5+Ni85BhVvZOodM9epgW3F\nbA5Q1SexvAF1PPjX4JpMstak/QhAgl1qMSqEevL8cmUeTgcMuVWCJmlge9h7B1CS\nD4rtlimGZozG39rUBDg6Qt2K+P4wBfLblL0k4C4YUdLnpGYEDIth+i8XsRpFlogx\nCAFyH9+knYsDbR43UJ9shtc42Ybd40Afihj8KnYKXzchyQ42aC8aZ/h5hyZ28yVy\nOj3Vos0VdBIs/gAyJ/4yyQFCXYte64I7ssrlbGRaco4nKF3HmaNhxwyKyJafz19e\nHwIDAQAB\n-----END PUBLIC KEY-----`;\n\nconst sandboxPublicKey = `\n-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwpb91cEYuyJNQepZAVfP\nZIlPZfNUefH+n6w9SW3fykqKu938cR7WadQv87oF2VuT+fDt7kqeRziTmPSUhqPU\nys/V2Q1rlfJuXbE+Gga37t7zwd0egQ+KyOEHQOpcTwKmtZ81ieGHynAQzsn1We3j\nwt760MsCPJ7GMT141ByQM+yW1Bx+4SG3IGjXWyqOWrcXsxAvIXkpUD/jK/L958Cg\nnZEgz0BSEh0QxYLITnW1lLokSx/dTianWPFEhMC9BgijempgNXHNfcVirg1lPSyg\nz7KqoKUN0oHqWLr2U1A+7kqrl6O2nx3CKs1bj1hToT1+p4kcMoHXA7kA+VBLUpEs\nVwIDAQAB\n-----END PUBLIC KEY-----`;\n\nexport const constructEvent = (sandbox = false, payload, signature) => {\n  const sig = crypto.createVerify(\"RSA-SHA1\");\n  sig.update(payload);\n  const verified = sig.verify(\n    sandbox ? sandboxPublicKey : livePublicKey,\n    signature,\n    \"base64\"\n  );\n  if (verified) return JSON.parse(payload);\n  return null;\n};\n"]}